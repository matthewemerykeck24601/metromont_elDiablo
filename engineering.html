<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Engineering & Drafting - CastLink</title>
    <link rel="stylesheet" href="styles/engineering.css">
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <script src="scripts/config.js"></script>
</head>

<body>
    <div class="container">
        <header class="main-header">
            <div class="header-content">
                <div class="nav-section">
                    <button class="back-button" onclick="goBack()">
                        <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M19 12H5m7-7l-7 7 7 7" />
                        </svg>
                        Back to Dashboard
                    </button>
                </div>
                <div class="logo-section">
                    <h1 class="main-title">Engineering & Drafting</h1>
                    <p class="main-subtitle">Design Automation & Technical Management</p>
                </div>
                <div class="auth-section">
                    <div class="auth-status">
                        <div class="status-indicator" id="authIndicator"></div>
                        <span id="authStatus">Checking authentication...</span>
                    </div>
                    <div class="auth-info" id="authInfo">Connecting to ACC...</div>
                </div>
            </div>
        </header>

        <main class="main-content">
            <section class="module-header">
                <div class="module-header-content">
                    <div class="module-info">
                        <h2 class="module-title">Design Automation Hub</h2>
                        <p class="module-description">
                            Comprehensive engineering tools for design calculations, technical documentation,
                            issue management, and bill of materials integration with ACC and Revit.
                        </p>
                    </div>
                    <div class="project-selection-panel" id="projectSelectionPanel">
                        <label for="projectSelect">Project:</label>
                        <select id="projectSelect" onchange="onProjectChange()">
                            <option value="">Select a project...</option>
                            <option value="">Loading projects...</option>
                        </select>
                        <div class="project-info" id="projectInfo">
                            <span class="project-name" id="projectName">No project selected</span>
                            <span class="project-details" id="projectDetails">Select a project to view design requirements</span>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Split Screen Engineering Tools -->
            <section class="engineering-split-screen">
                <!-- Left Column: Design & Analysis Tools -->
                <div class="engineering-column left-column">
                    <h3 class="column-title">Design & Analysis</h3>

                    <!-- Engineering Calculator -->
                    <div class="engineering-card calculator" onclick="openEngineeringTool('calculator')">
                        <div class="card-header">
                            <div class="card-icon">
                                <svg width="32" height="32" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V5h14v14z" />
                                    <path d="M6.5 7.5h3v1h-3zm0 2h3v1h-3zm0 2h3v1h-3zm5-4h5v1h-5zm0 2h5v1h-5zm0 2h5v1h-5zm-5 2h11v1H6.5z" />
                                    <circle cx="16" cy="8" r="1" />
                                    <path d="M14.5 16.5h3v1h-3z" />
                                </svg>
                            </div>
                            <div class="card-title-section">
                                <h3 class="card-title">Engineering Calculator</h3>
                                <p class="card-subtitle">Precast design calculations & analysis</p>
                            </div>
                            <div class="card-status">
                                <span class="status-badge status-active">Ready</span>
                            </div>
                        </div>
                        <div class="card-content">
                            <p class="card-description">
                                Comprehensive calculation tools for concrete stress analysis, prestress design,
                                load calculations, and structural verification specific to precast elements.
                            </p>
                            <div class="card-features">
                                <span class="feature-tag">Point Loads</span>
                                <span class="feature-tag">Columns</span>
                                <span class="feature-tag">Wall Panels</span>
                                <span class="feature-tag">Beams</span>
                                <span class="feature-tag">Double Tees</span>
                            </div>
                            <div class="card-actions">
                                <span class="action-hint">Click to open calculator →</span>
                            </div>
                        </div>
                    </div>

                    <!-- Design Summary Generator -->
                    <div class="engineering-card design-summary" onclick="openEngineeringTool('design-summary')">
                        <div class="card-header">
                            <div class="card-icon">
                                <svg width="32" height="32" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
                                    <path d="M14 2v6h6" />
                                    <line x1="16" y1="13" x2="8" y2="13" />
                                    <line x1="16" y1="17" x2="8" y2="17" />
                                    <polyline points="10,9 9,9 8,9" />
                                </svg>
                            </div>
                            <div class="card-title-section">
                                <h3 class="card-title">Design Summary Generator</h3>
                                <p class="card-subtitle">Automated design documentation</p>
                            </div>
                            <div class="card-status">
                                <span class="status-badge status-development">In Development</span>
                            </div>
                        </div>
                        <div class="card-content">
                            <p class="card-description">
                                Automatically generate comprehensive design summaries from calculation data,
                                model information, and production requirements for project documentation.
                            </p>
                            <div class="card-features">
                                <span class="feature-tag">Auto Generation</span>
                                <span class="feature-tag">PDF Export</span>
                                <span class="feature-tag">Template Based</span>
                            </div>
                            <div class="card-actions">
                                <span class="action-hint">Coming soon</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Right Column: Project Management Tools -->
                <div class="engineering-column right-column">
                    <h3 class="column-title">Project Management</h3>

                    <!-- Piece Issue Management -->
                    <div class="engineering-card piece-issue" onclick="openEngineeringTool('piece-issue')">
                        <div class="card-header">
                            <div class="card-icon">
                                <svg width="32" height="32" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5" />
                                    <circle cx="12" cy="12" r="3" />
                                    <path d="M12 1v6m0 6v6m-5-7h6m-6 0h6" />
                                </svg>
                            </div>
                            <div class="card-title-section">
                                <h3 class="card-title">Piece Issue Management</h3>
                                <p class="card-subtitle">Track and resolve design issues</p>
                            </div>
                            <div class="card-status">
                                <span class="status-badge status-development">In Development</span>
                            </div>
                        </div>
                        <div class="card-content">
                            <p class="card-description">
                                Centralized issue tracking for precast pieces including design conflicts,
                                manufacturing constraints, and field coordination requirements.
                            </p>
                            <div class="card-features">
                                <span class="feature-tag">Issue Tracking</span>
                                <span class="feature-tag">ACC Integration</span>
                                <span class="feature-tag">Notifications</span>
                            </div>
                            <div class="card-actions">
                                <span class="action-hint">Coming soon</span>
                            </div>
                        </div>
                    </div>

                    <!-- BOM Query Tool -->
                    <div class="engineering-card bom-query" onclick="openEngineeringTool('bom-query')">
                        <div class="card-header">
                            <div class="card-icon">
                                <svg width="32" height="32" fill="currentColor" viewBox="0 0 24 24">
                                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
                                    <path d="M14 2v6h6" />
                                    <path d="M9 13h2v2H9z" />
                                    <path d="M13 13h5v1h-5z" />
                                    <path d="M13 15h3v1h-3z" />
                                    <path d="M9 17h2v2H9z" />
                                    <path d="M13 17h5v1h-5z" />
                                    <path d="M13 19h3v1h-3z" />
                                </svg>
                            </div>
                            <div class="card-title-section">
                                <h3 class="card-title">BOM Query Tool</h3>
                                <p class="card-subtitle">Bill of materials analysis</p>
                            </div>
                            <div class="card-status">
                                <span class="status-badge status-development">In Development</span>
                            </div>
                        </div>
                        <div class="card-content">
                            <p class="card-description">
                                Advanced querying and analysis of bill of materials data from Revit models
                                with integration to production scheduling and inventory systems.
                            </p>
                            <div class="card-features">
                                <span class="feature-tag">Revit Integration</span>
                                <span class="feature-tag">Material Takeoffs</span>
                                <span class="feature-tag">Production Links</span>
                            </div>
                            <div class="card-actions">
                                <span class="action-hint">Coming soon</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Quick Actions Section -->
            <section class="quick-actions-section">
                <h3 class="section-title">Quick Actions</h3>
                <div class="quick-actions-grid">
                    <button class="quick-action-btn" onclick="openEngineeringTool('calculator')" disabled>
                        <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z" />
                            <path d="M9 9h2v2H9z" />
                            <path d="M13 9h2v2H13z" />
                            <path d="M9 13h2v2H9z" />
                            <path d="M13 13h2v2H13z" />
                        </svg>
                        New Calculation
                    </button>
                    <button class="quick-action-btn" onclick="showNotification('Feature coming soon', 'info')">
                        <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z" />
                            <path d="M14 2v6h6" />
                        </svg>
                        Generate Report
                    </button>
                    <button class="quick-action-btn" onclick="showNotification('Feature coming soon', 'info')">
                        <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                            <path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z" />
                            <polyline points="3.27,6.96 12,12.01 20.73,6.96" />
                            <line x1="12" y1="22.08" x2="12" y2="12" />
                        </svg>
                        View 3D Model
                    </button>
                    <button class="quick-action-btn" onclick="showNotification('Feature coming soon', 'info')">
                        <svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
                            <circle cx="11" cy="11" r="8" />
                            <line x1="21" y1="21" x2="16.65" y2="16.65" />
                        </svg>
                        Search Issues
                    </button>
                </div>
            </section>
        </main>

        <footer class="footer">
            <div class="footer-content">
                <p>&copy; 2025 Metromont Corporation - CastLink Engineering Module</p>
                <p>Integrated with Autodesk Construction Cloud for seamless project management</p>
            </div>
        </footer>

        <!-- Notification System -->
        <div class="notification" id="notification">
            <div class="notification-content" id="notificationText"></div>
        </div>
    </div>

    <script src="scripts/engineering.js"></script>
</body>
</html>