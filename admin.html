<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - Metromont El Diablo</title>
    <link rel="stylesheet" href="styles/index.css">
    <link rel="stylesheet" href="styles/admin.css">
</head>
<body class="auth-loading">
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <div class="logo-section">
                <img src="assets/images/metromont-logo.png" class="logo" alt="Metromont Logo"/>
                <div class="brand-text">
                    <h1>Admin Panel</h1>
                    <p>User & Module Access Management</p>
                </div>
            </div>
            <div class="header-buttons">
                <button class="btn btn-back" onclick="location.href='index.html'">
                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z" />
                    </svg>
                    Back to Dashboard
                </button>
            </div>
        </div>
    </header>

    <main class="main-container">
        <!-- Controls Section -->
        <section class="controls-section">
            <div class="add-user-form">
                <input id="newUserName" type="text" placeholder="User name" class="input-field"/>
                <input id="newUserEmail" type="email" placeholder="Email address (userId)" class="input-field"/>
                <button id="addUserBtn" class="btn btn-primary">
                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"/>
                    </svg>
                    Add User
                </button>
            </div>
            <div class="bulk-actions">
                <button id="removeSelectedBtn" class="btn btn-danger" disabled>
                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/>
                    </svg>
                    Remove Selected
                </button>
            </div>
        </section>

        <!-- Users Table -->
        <section class="table-section">
            <div class="table-container">
                <table class="admin-table" id="usersTable">
                    <thead>
                        <tr>
                            <th class="col-checkbox"><input type="checkbox" id="checkAll" title="Select all users"/></th>
                            <th class="col-name">User Name</th>
                            <th class="col-email">Email (UserId)</th>
                            <th data-module="quality">Quality</th>
                            <th data-module="design">Engineering</th>
                            <th data-module="production">Scheduling</th>
                            <th data-module="db-manager">DB Manager</th>
                            <th data-module="inventory">Inventory</th>
                            <th data-module="haul">Haul</th>
                            <th data-module="fab">Fab</th>
                            <th class="col-admin">Admin</th>
                        </tr>
                    </thead>
                    <tbody id="usersTbody">
                        <tr>
                            <td colspan="11" class="loading-row">Loading users...</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>
    </main>

    <!-- Auth Processing Overlay -->
    <div class="auth-processing active" id="authProcessing">
        <div class="auth-processing-content">
            <div class="loading"></div>
            <h3 id="authTitle">Connecting to Autodesk Construction Cloud</h3>
            <p id="authMessage">Checking your authentication status...</p>
        </div>
    </div>

    <!-- Notification Toast -->
    <div id="notification" class="notification">
        <div class="notification-content" id="notificationContent"></div>
    </div>

    <!-- Scripts -->
    <script src="scripts/env.js"></script>
    <script type="module" src="scripts/fetch-helpers.js"></script>
    <script src="scripts/access-control.js"></script>
    <script src="scripts/user-profile.js"></script>
    <script src="scripts/admin.js"></script>
</body>
</html>

